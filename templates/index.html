<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Notes Summarizer</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        .spinner-border { display: none; }
        #summaryCard { display: none; }
    </style>
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">

            <!-- Header -->
            <div class="text-center mb-4">
                <h2 class="fw-bold">AI Notes Summarizer</h2>
                <p class="text-muted">Paste your notes and get a concise summary</p>
            </div>

            <!-- Input Card -->
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <form method="POST" id="summarizerForm">
                        <div class="mb-2">
                            <textarea
                                class="form-control"
                                id="inputText"
                                name="text"
                                rows="7"
                                placeholder="Paste your notes here..."
                                required>{{ original_text }}</textarea>
                        </div>
                        <small class="text-muted" id="charCount">0 characters</small>
                        <div class="d-grid mt-3">
                            <button type="submit" class="btn btn-primary" id="summarizeBtn" disabled>
                                Summarize
                            </button>
                        </div>
                        <div class="text-center mt-2">
                            <div class="spinner-border text-primary" role="status" id="loadingSpinner">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Summary Card -->
            <div class="card shadow-sm" id="summaryCard">
                <div class="card-body">
                    <h5 class="card-title">Summary
                        <button class="btn btn-sm btn-outline-secondary float-end" id="copyBtn" title="Copy to clipboard">Copy</button>
                    </h5>
                    <p class="card-text" id="summaryText">{{ summary }}</p>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Bootstrap JS + Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const inputText = document.getElementById('inputText');
    const charCount = document.getElementById('charCount');
    const summarizeBtn = document.getElementById('summarizeBtn');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const summaryCard = document.getElementById('summaryCard');
    const copyBtn = document.getElementById('copyBtn');
    const summaryText = document.getElementById('summaryText');
    const form = document.getElementById('summarizerForm');

    // Update character count & enable button
    inputText.addEventListener('input', () => {
        charCount.textContent = `${inputText.value.length} characters`;
        summarizeBtn.disabled = inputText.value.trim().length === 0;
    });

    // Show loading spinner on form submit
    form.addEventListener('submit', () => {
        summarizeBtn.disabled = true;
        loadingSpinner.style.display = 'inline-block';
    });

    // Copy summary to clipboard
    copyBtn.addEventListener('click', () => {
        navigator.clipboard.writeText(summaryText.textContent).then(() => {
            copyBtn.textContent = 'Copied!';
            setTimeout(() => copyBtn.textContent = 'Copy', 1500);
        });
    });

    // Show summary card if summary exists
    if (summaryText.textContent.trim().length > 0) {
        summaryCard.style.display = 'block';
    }
</script>

</body>
</html>
